@model asp_project.Models.ViewModels.HomeIndexViewModel

@{
    ViewData["Title"] = "Trang chủ";
}

<link rel="stylesheet" href="~/css/home-custom.css" asp-append-version="true" />


<!-- ============================================
     HERO SECTION
     ============================================ -->
<section class="hero-section full-width-section">
    <div id="heroCarousel" class="carousel slide hero-carousel" data-bs-ride="carousel" data-bs-interval="6000">
        <!-- Indicators -->
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2"></button>
        </div>
        
        <!-- Slides -->
        <div class="carousel-inner">
            <!-- Slide 1 -->
            <div class="carousel-item active">
                <img src="https://images.unsplash.com/photo-1558618666-fcd25c85cd64?q=80&w=1932&auto=format&fit=crop" alt="Summer Collection">
                <div class="hero-overlay"></div>
                <div class="hero-content">
                    <span class="hero-badge">✨ Bộ sưu tập 2026</span>
                    <h1 class="hero-title">Summer <span>Collection</span></h1>
                    <p class="hero-subtitle">Khám phá vẻ đẹp thời trang với những thiết kế độc đáo, tinh tế</p>
                    <div class="hero-buttons">
                        <a href="/Search/Index" class="btn-hero-primary">Khám phá ngay</a>
                        <a href="#" class="btn-hero-secondary">Xem Lookbook</a>
                    </div>
                </div>
            </div>
            
            <!-- Slide 2 -->
            <div class="carousel-item">
                <img src="https://images.unsplash.com/photo-1469334031218-e382a71b716b?q=80&w=1770&auto=format&fit=crop" alt="New Arrivals">
                <div class="hero-overlay"></div>
                <div class="hero-content">
                    <span class="hero-badge">🔥 Mới ra mắt</span>
                    <h1 class="hero-title">New <span>Arrivals</span></h1>
                    <p class="hero-subtitle">Cập nhật xu hướng mới nhất, định hình phong cách của bạn</p>
                    <div class="hero-buttons">
                        <a href="/Search/Index" class="btn-hero-primary">Mua sắm ngay</a>
                        <a href="#" class="btn-hero-secondary">Khuyến mãi hot</a>
                    </div>
                </div>
            </div>
            
            <!-- Slide 3 -->
            <div class="carousel-item">
                <img src="https://images.unsplash.com/photo-1445205170230-053b83016050?q=80&w=1771&auto=format&fit=crop" alt="Premium Style">
                <div class="hero-overlay"></div>
                <div class="hero-content">
                    <span class="hero-badge">💎 Premium Style</span>
                    <h1 class="hero-title">Elegant <span>Fashion</span></h1>
                    <p class="hero-subtitle">Nâng tầm phong cách với những sản phẩm cao cấp</p>
                    <div class="hero-buttons">
                        <a href="/Search/Index" class="btn-hero-primary">Xem bộ sưu tập</a>
                        <a href="#" class="btn-hero-secondary">Đăng ký VIP</a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Controls -->
        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <i class="bi bi-chevron-left"></i>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <i class="bi bi-chevron-right"></i>
        </button>
    </div>
</section>

<!-- ============================================
     CATEGORY SECTION
     ============================================ -->
<section class="category-section full-width-section">
    <div class="container">
        <div class="section-header">
            <span class="section-badge">Khám phá</span>
            <h2 class="section-title">Danh mục sản phẩm</h2>
            <div class="section-divider"></div>
        </div>
        
        <div class="category-grid">
            <a href="/Search/Index?q=nam" class="category-item">
                <img src="https://images.unsplash.com/photo-1617137968427-85924c800a22?q=80&w=687&auto=format&fit=crop" alt="Thời trang nam">
                <div class="category-info">
                    <div class="category-name">Thời Trang Nam</div>
                    <div class="category-count">+500 sản phẩm</div>
                </div>
            </a>
            
            <a href="/Search/Index?q=nữ" class="category-item">
                <img src="https://images.unsplash.com/photo-1483985988355-763728e1935b?q=80&w=1170&auto=format&fit=crop" alt="Thời trang nữ">
                <div class="category-info">
                    <div class="category-name">Thời Trang Nữ</div>
                    <div class="category-count">+800 sản phẩm</div>
                </div>
            </a>
            
            <a href="/Search/Index?q=trẻ em" class="category-item">
                <img src="https://images.unsplash.com/photo-1622290291468-a28f7a7dc6a8?q=80&w=1072&auto=format&fit=crop" alt="Thời trang trẻ em">
                <div class="category-info">
                    <div class="category-name">Trẻ Em</div>
                    <div class="category-count">+300 sản phẩm</div>
                </div>
            </a>
            
            <a href="/Search/Index?q=giày" class="category-item">
                <img src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=1170&auto=format&fit=crop" alt="Giày dép">
                <div class="category-info">
                    <div class="category-name">Giày & Dép</div>
                    <div class="category-count">+200 sản phẩm</div>
                </div>
            </a>
            
            <a href="/Search/Index?q=túi xách" class="category-item">
                <img src="https://images.unsplash.com/photo-1548036328-c9fa89d128fa?q=80&w=1169&auto=format&fit=crop" alt="Túi xách">
                <div class="category-info">
                    <div class="category-name">Túi Xách & Ví</div>
                    <div class="category-count">+150 sản phẩm</div>
                </div>
            </a>
            
            <a href="/Search/Index?q=phụ kiện" class="category-item">
                <img src="https://images.unsplash.com/photo-1523170335258-f5ed11844a49?q=80&w=1180&auto=format&fit=crop" alt="Phụ kiện">
                <div class="category-info">
                    <div class="category-name">Phụ Kiện</div>
                    <div class="category-count">+400 sản phẩm</div>
                </div>
            </a>
        </div>
    </div>
</section>

<!-- ============================================
     FEATURE BANNER
     ============================================ -->
<section class="feature-banner full-width-section">
   <div class="container">
    <div class="feature-grid">
        <div class="feature-item text-center">
            <div class="feature-icon text-white">
                <i class="bi bi-truck fs-1"></i> </div>
            <h3 class="feature-title text-white mt-2">Miễn phí vận chuyển</h3>
            <p class="feature-desc text-white-50">Đơn hàng từ 500K</p> </div>

        <div class="feature-item text-center">
            <div class="feature-icon text-white">
                <i class="bi bi-arrow-repeat fs-1"></i>
            </div>
            <h3 class="feature-title text-white mt-2">Đổi trả dễ dàng</h3>
            <p class="feature-desc text-white-50">Trong vòng 30 ngày</p>
        </div>

        <div class="feature-item text-center">
            <div class="feature-icon text-white">
                <i class="bi bi-shield-check fs-1"></i>
            </div>
            <h3 class="feature-title text-white mt-2">Bảo hành chất lượng</h3>
            <p class="feature-desc text-white-50">Cam kết chính hãng</p>
        </div>

        <div class="feature-item text-center">
            <div class="feature-icon text-white">
                <i class="bi bi-headset fs-1"></i>
            </div>
            <h3 class="feature-title text-white mt-2">Hỗ trợ 24/7</h3>
            <p class="feature-desc text-white-50">Luôn sẵn sàng phục vụ</p>
        </div>
    </div>
</div>
</section>

<!-- ============================================
     TOP SELLING PRODUCTS
     ============================================ -->
<section class="products-section">
    <div class="container">
        <div class="section-header-inline">
            <div class="section-title-group">
                <i class="bi bi-fire section-icon"></i>
                <h2 class="section-title-inline">Best Sellers</h2>
            </div>
            <a href="/Search/Index" class="section-link">
                Xem tất cả <i class="bi bi-arrow-right"></i>
            </a>
        </div>
        
        @if (Model.TopSellingProducts == null || !Model.TopSellingProducts.Any())
        {
            <div class="empty-state">
                <div class="empty-state-icon">
                    <i class="bi bi-bag-x"></i>
                </div>
                <p class="empty-state-text">Đang cập nhật sản phẩm bán chạy...</p>
            </div>
        }
        else
        {
            <div class="product-grid">
                @foreach (var item in Model.TopSellingProducts)
                {
                    <div class="product-card">
                        <div class="product-image-wrapper">
                            <span class="product-badge badge-hot">
                                <i class="bi bi-fire me-1"></i>Đã bán @item.DaBan
                            </span>
                            <a href="/ProductPage/Details/@item.ProductId">
                                <img src="@item.HinhAnh" alt="@item.TenSanPham" 
                                     onerror="this.src='https://placehold.co/400x400/f5f5f5/9e9e9e?text=No+Image'">
                            </a>
                            <div class="product-actions">
                                <button class="action-btn wishlist-btn" title="Yêu thích">
                                    <i class="bi bi-heart"></i>
                                </button>
                                <a href="/ProductPage/Details/@item.ProductId" class="action-btn" title="Xem chi tiết">
                                    <i class="bi bi-eye"></i>
                                </a>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">
                                <a href="/ProductPage/Details/@item.ProductId" title="@item.TenSanPham">@item.TenSanPham</a>
                            </h3>
                            <div class="product-meta">
                                <div class="product-rating">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-half"></i>
                                </div>
                                <span class="product-sold">(@item.DaBan đã bán)</span>
                            </div>
                            <div class="product-price">
                                <span>@item.Gia.ToString("N0") ₫</span>
                            </div>
                            <a href="/ProductPage/Details/@item.ProductId" class="btn-add-cart">
                                Mua ngay
                            </a>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</section>

<!-- ============================================
     RECOMMENDED PRODUCTS
     ============================================ -->
<section class="products-section alt-bg">
    <div class="container">
        <div class="section-header-inline">
            <div class="section-title-group">
                <i class="bi bi-stars section-icon"></i>
                <h2 class="section-title-inline">
                    @if (User.Identity.IsAuthenticated)
                    { <span>Gợi ý cho bạn</span> }
                    else
                    { <span>Có thể bạn sẽ thích</span> }
                </h2>
            </div>
            <a href="/Search/Index" class="section-link">
                Khám phá thêm <i class="bi bi-arrow-right"></i>
            </a>
        </div>

        @if (Model.RecommendedProducts != null && Model.RecommendedProducts.Any())
        {
            <div class="product-grid">
                @foreach (var item in Model.RecommendedProducts)
                {
                    <div class="product-card">
                        <div class="product-image-wrapper">
                            <span class="product-badge badge-recommend">
                                @if(User.Identity.IsAuthenticated){ <span><i class="bi bi-magic me-1"></i>Gợi ý</span> } 
                                else { <span><i class="bi bi-sparkles me-1"></i>Mới</span> }
                            </span>
                            <a href="/ProductPage/Details/@item.ProductId">
                                <img src="@item.HinhAnh" alt="@item.TenSanPham" 
                                     onerror="this.src='https://placehold.co/400x400/f5f5f5/9e9e9e?text=No+Image'">
                            </a>
                            <div class="product-actions">
                                <button class="action-btn wishlist-btn" title="Yêu thích">
                                    <i class="bi bi-heart"></i>
                                </button>
                                <a href="/ProductPage/Details/@item.ProductId" class="action-btn" title="Xem chi tiết">
                                    <i class="bi bi-eye"></i>
                                </a>
                            </div>
                        </div>
                        <div class="product-info">
                            <h3 class="product-title">
                                <a href="/ProductPage/Details/@item.ProductId" title="@item.TenSanPham">@item.TenSanPham</a>
                            </h3>
                            <div class="product-meta">
                                <div class="product-rating">
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star-fill"></i>
                                    <i class="bi bi-star"></i>
                                </div>
                            </div>
                            <div class="product-price">
                                <span>@item.Gia.ToString("N0") ₫</span>
                            </div>
                            <a href="/ProductPage/Details/@item.ProductId" class="btn-add-cart">
                                Xem chi tiết
                            </a>
                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="empty-state">
                <div class="empty-state-icon">
                    <i class="bi bi-stars"></i>
                </div>
                <p class="empty-state-text">Đang cập nhật sản phẩm mới...</p>
            </div>
        }
    </div>
</section>

@section Scripts {
    <script>
        // Additional homepage-specific animations
        document.addEventListener('DOMContentLoaded', function() {
            // Animate hero content on slide change
            const heroCarousel = document.getElementById('heroCarousel');
            if (heroCarousel) {
                heroCarousel.addEventListener('slid.bs.carousel', function() {
                    const activeSlide = this.querySelector('.carousel-item.active');
                    const content = activeSlide.querySelector('.hero-content');
                    if (content) {
                        content.style.animation = 'none';
                        content.offsetHeight; // Trigger reflow
                        content.querySelectorAll('.hero-badge, .hero-title, .hero-subtitle, .hero-buttons').forEach((el, i) => {
                            el.style.animation = `fadeInUp 0.8s ease ${0.2 + i * 0.2}s both`;
                        });
                    }
                });
            }
            
            // Wishlist button functionality
            document.querySelectorAll('.wishlist-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const icon = this.querySelector('i');
                    if (icon.classList.contains('bi-heart')) {
                        icon.classList.remove('bi-heart');
                        icon.classList.add('bi-heart-fill');
                        this.classList.add('active');
                    } else {
                        icon.classList.remove('bi-heart-fill');
                        icon.classList.add('bi-heart');
                        this.classList.remove('active');
                    }
                });
            });
        });
    </script>
}